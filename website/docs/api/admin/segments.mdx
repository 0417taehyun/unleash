---
title: /api/admin/segments
---
import ApiRequest from '@site/src/components/ApiRequest'
export const basePath = "api/admin/segments"
export const path = (p) => `api/admin/segments/${p}`

:::info Availability
The segments API is available to Pro and Enterprise users from Unleash 4.10.
:::

:::note
To use the admin API, you'll need to [create and use an admin API token](../../user_guide/token.md).
:::

The segments API lets you create, read, update, and delete [segments](../../reference/segments.mdx). All payload

## Get all segments

Retrieve all segments that exist in this Unleash instance. Returns a list of [segment objects](#isegment).

<ApiRequest verb="Get" url={basePath} title="Retrieve all existing segments."/>

<details open>

<summary>Example responses</summary>

### 200 OK

``` json
[
  {
    "id": 1,
    "name": "my-segment",
    "description": "a segment description",
    "constraints": [],
    "createdBy": "user@example.com",
    "createdAt": "2022-04-01T14:02:25.491Z"
  }
]
```

</details>

## Create segment

Create a new segment with the specified configuration.

<ApiRequest verb="post" url={basePath} title="Create a new segment."
payload={{
  "name": "my-segment",
  "description": "a segment description",
  "constraints": []
}}
/>


<details open>

<summary>Example responses</summary>

### 200 OK

Contains the newly created segment object.

``` json
{
  "id": 1,
  "name": "my-segment",
  "description": "a segment description",
  "constraints": [],
  "createdBy": "user@example.com",
  "createdAt": "2022-04-01T14:02:25.491Z"
}
```

### 400 Bad request

A segment with the provided name already exists.

</details>

### Payload structure

Use a JSON object with the following parameters to create a new segment.

| Parameter     | Type                                       | Required | Description                                    | Example value                                    |
|---------------|--------------------------------------------|----------|------------------------------------------------|--------------------------------------------------|
| `name`        | string                                     | Yes      | The name of the segment. Must be URL friendly. | `"mobile-users"`                                 |
| `description` | string                                     | No       | A description of the segment.                  | `"This segment is for users on mobile devices."` |
| `constraints` | list of [constraint objects](#iconstraint) | Yes      | The constraints in this segment.               | `[]`                                              |

## Get segment by ID

Retrieves the segment with the specified ID.
<ApiRequest verb="Get" url={`${ basePath }/<segment-id>`} title="Retrieve the segment with the provided ID."/>

<details open>

<summary>Example responses</summary>

### 200 OK

``` json
{
  "id": 1,
  "name": "my-segment",
  "description": "a segment description",
  "constraints": [],
  "createdBy": "user@example.com",
  "createdAt": "2022-04-01T14:02:25.491Z"
}
```

### 404 Not Found

No segment with the provided ID exists.

</details>

## Update segment by id: `PUT /:id`

## Delete segment by id: `DELETE /:id`

## List strategies that use a specific segment: `GET /:id/strategies`

## List segments applied to a specific strategy: `GET /strategies/:strategyId`

## Replace activation strategy segments `POST /strategies/:strategyId`

## Types

### Segment creation payload

### `ISegment`: segment interface {#isegment}

``` ts
export interface ISegment {
    id: number;
    name: string;
    description?: string;
    constraints: IConstraint[];
    createdBy?: string;
    createdAt: Date;
}
```

### `IConstraint`: constraint interface {#iconstraint}

```ts
export interface IConstraint {
    contextName: string;
    operator: string;
    values?: string[];
    value?: string;
    inverted?: boolean;
    caseInsensitive?: boolean;
}
```
